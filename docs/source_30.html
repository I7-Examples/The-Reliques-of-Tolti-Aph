<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<meta name="generator" content="Adobe GoLive">
		<title>The Reliques of Tolti-Aph - Source Text</title>
	</head>

	<body bgcolor="#ffffff">
		<table border="0" cellpadding="2"><tr><td align="left" valign="top"><font face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif"><a href="Cover.jpg"><img src="Small Cover.jpg" border="1"></a></font></td><td align="left" valign="top">
					<h3><font color="#0000cc" face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif">The Reliques of Tolti-Aph</font></h3>
					<h3><font size="-1" face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif">An interactive fiction by Graham Nelson (2005) - the Inform 7 source text</font></h3>
				</td></tr>
		<tr align="left" valign="top"><td align="left" valign="top"><font size="-1" face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif"><a href="index.html">Home page</a><br><br><a href="source.html">Contents</a><br><a href="source_29.html">Previous</a><br><a href="source_31.html">Next</a><br><br><a href="source.txt">Complete text</a></font></td><td align="left" valign="top"><font face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif"><b>Section E(c) - Spatial coordinates</b>
<br>

<br>
A spatial coordinate is a kind of value. &lt;9,24,24&gt; specifies a spatial coordinate with parts maze level, easting (without leading zeros), northing (without leading zeros). A room has a spatial coordinate called grid position. Definition: A room is unlocated if its grid position is &lt;0,0,0&gt;. Definition: A room is located if it is not unlocated.<font color=#404040><sup><a href="#note1">[1]</a></sup></font>
<br>

<br>
To decide which number is the current maze level:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let L be the maze level part of the grid position of the location;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;decide on L.
<br>

<br>
The previous maze level is a number that varies.
<br>

<br>
Every turn:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if the location is a labyrinth room and the location is not the Hedge Archway
<br>
&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the current maze level is not the previous maze level
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the current maze level is 1, say &quot;<font color=#000080>You blink in the shadowy, but natural twilight, feeling a faint breeze on your face once again. You are back in the familiar hedge-maze at the surface.</font>&quot;;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the previous maze level is 1, say &quot;<font color=#000080>Underground, the labyrinth continues with clean-cut, magically lit passages.</font>&quot;;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;change the previous maze level to the current maze level.
<br>

<br>
A direction has a spatial coordinate called vector. North has vector &lt;0,0,1&gt;. South has vector &lt;0,0,24&gt;. East has vector &lt;0,1,0&gt;. West has vector &lt;0,24,0&gt;. Down has vector &lt;1,0,0&gt;. Up has vector &lt;9,0,0&gt;.<font color=#404040><sup><a href="#note2">[2]</a></sup></font> Definition: A direction is vectorial if its vector is not &lt;0,0,0&gt;.<font color=#404040><sup><a href="#note3">[3]</a></sup></font> Definition: A direction is vertical if it is up or it is down.
<br>

<br>
To decide which spatial coordinate is the vector sum of (V1 - a spatial coordinate) and (V2 - a spatial coordinate):
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let L be the maze level part of V1 plus the maze level part of V2;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let L be the remainder after dividing L by 10;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let E be the easting part of V1 plus the easting part of V2;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let E be the remainder after dividing E by 25;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let N be the northing part of V1 plus the northing part of V2;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let N be the remainder after dividing N by 25;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if L is 0 or L is 9, decide on &lt;0,0,0&gt;;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if E is 0 or E is 24, decide on &lt;0,0,0&gt;;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if N is 0 or N is 24, decide on &lt;0,0,0&gt;;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let the sum be the spatial coordinate with maze level part L easting part E northing part N;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;decide on the sum.<font color=#404040><sup><a href="#note4">[4]</a></sup></font>
<br>

<br>
To decide which spatial coordinate is the vector difference of (V1 - a spatial coordinate) and (V2 - a spatial coordinate):
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let L be the maze level part of V1 minus the maze level part of V2;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let L be the remainder after dividing L by 10;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let E be the easting part of V1 minus the easting part of V2;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let E be the remainder after dividing E by 25;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let N be the northing part of V1 minus the northing part of V2;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let N be the remainder after dividing N by 25;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;let the sum be the spatial coordinate with maze level part L easting part E northing part N;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;decide on the sum.
<br>

<br>
</font>
					<p><font size="-1" face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif"><p><i>Notes</i><p>
<A name="note1"><font color=#404040>[1].  Inform does not automatically construct un- prefixes: they're too unpredictable in English. For instance, in ROTA "undead" has a definition which is by no means equivalent to "not dead".</font><p>
<A name="note2"><font color=#404040>[2].  As this demonstrates, Inform allows us to add to or modify even the most fundamental built-in concepts.</font><p>
<A name="note3"><font color=#404040>[3].  For instance, "northeast" and "outside" are non-vectorial directions in this sense. The Maze occupies a cubical lattice and never has connections in those directions.</font><p>
<A name="note4"><font color=#404040>[4].  All of that remainder-after-dividing stuff is to enable us to have relative vectors with negative entries, in effect. Thus a single move west is achieved by adding <0,24,0> to the position, because 24 is the same as -1 when we are dealing only with numbers in the range 0 to 24. However, the maze does not "wrap around": the legal grid positions are <L,E,N> where L must be 1 to 8, and E and N must be 1 to 23, with the special value <0,0,0> being reserved as a "no position at all" value.</font><p>
</font></p>
					<p></p>
				</td></tr></table>
	</body>

</html>
