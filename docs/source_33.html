<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<meta name="generator" content="Adobe GoLive">
		<title>The Reliques of Tolti-Aph - Source Text</title>
	</head>

	<body bgcolor="#ffffff">
		<table border="0" cellpadding="2"><tr><td align="left" valign="top"><font face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif"><a href="Cover.jpg"><img src="Small Cover.jpg" border="1"></a></font></td><td align="left" valign="top">
					<h3><font color="#0000cc" face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif">The Reliques of Tolti-Aph</font></h3>
					<h3><font size="-1" face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif">An interactive fiction by Graham Nelson (2005) - the Inform 7 source text</font></h3>
				</td></tr>
		<tr align="left" valign="top"><td align="left" valign="top"><font size="-1" face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif"><a href="index.html">Home page</a><br><br><a href="source.html">Contents</a><br><a href="source_32.html">Previous</a><br><a href="source_34.html">Next</a><br><br><a href="source.txt">Complete text</a></font></td><td align="left" valign="top"><font face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif"><b>Section E(f) - Solid Rock and labyrinth boundaries</b>
<br>

<br>
<font color=#404040>[&quot;Solid Rock&quot; is a room which is never visited, but which is used to indicate blocked-off routes: an exit leading to Solid Rock is considered blocked. Initially, when none of the labyrinth rooms have been &quot;played&quot; into the maze, all exits are blocked in this way. Solid Rock is also used as a special value meaning that no room is at a given grid position: thus &quot;the room at &lt;1,4,12&gt;&quot; might evaluate to a room present in the maze, or it might evaluate to Solid Rock.</font>]
<br>

<br>
Solid Rock is a room.
<br>

<br>
To make all labyrinth exits lead to Solid Rock:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;repeat with blank room running through labyrinth rooms
<br>
&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let Sh be the shape of the blank room;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if U part of Sh is 1, change the up exit of blank room to Solid Rock;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if D part of Sh is 1, change the down exit of blank room to Solid Rock;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if N part of Sh is 1, change the north exit of blank room to Solid Rock;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if E part of Sh is 1, change the east exit of blank room to Solid Rock;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if S part of Sh is 1, change the south exit of blank room to Solid Rock;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if W part of Sh is 1, change the west exit of blank room to Solid Rock;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;end repeat.
<br>

<br>
To decide which room is the room at (grid ref - a spatial coordinate):
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if grid ref is &lt;0,0,0&gt; then decide on Solid Rock;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;repeat with R running through rooms
<br>
&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the grid position of R is grid ref then decide on R;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;end repeat;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;decide on Solid Rock.
<br>

<br>
</font>
					<p><font size="-1" face="Trebuchet MS, Geneva, Arial, Helvetica, SunSans-Regular, sans-serif"></font></p>
					<p></p>
				</td></tr></table>
	</body>

</html>
