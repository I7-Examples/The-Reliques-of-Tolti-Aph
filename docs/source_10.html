<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Graham Nelson - The Reliques of Tolti-Aph — 12 of 57</title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="author" content="Graham Nelson" />
  <meta name="description" content="A page for the game The Reliques of Tolti-Aph by Graham Nelson." />
  <link rel="stylesheet" href="style.css" type="text/css" media="all" />
</head>

<body>

<div class = "container">

<div class ="sourcecoverimage">
	<span><a href="Cover.jpg"><img src="Small Cover.jpg" border="1"></a></span>
</div>

<div class ="sourceintroduction">
	<h1>
		<span>The Reliques of Tolti-Aph</span> <span class="pagination">— 12 of 57</span>
	</h1>
	<h2>
		<span>Graham Nelson</span>
	</h2>
	<div class ="sourcebibliography">
		<span>Release 3</span>
	</div>
</div>

<div class = "links">
<ul>
<li><a href="index.html">Home page</a></li><li><a href="source.html">Beginning</a></li><li><a href="source_9.html">Previous</a></li><li><a href="source_11.html">Next</a></li>
</ul>
</div>

<div class = "source">
<p class="indent0"><span class="heading">Section 2(d) - The casting action</span></p><p class="indent0">Affectedness relates various people to various spells. The verb to be affected by implies the affectedness relation.<a name="note1ref"></a><span class="notecue"><a href="#note1">[1]</a></span></p><p class="indent0">Casting it at is an action applying to one spell and one visible thing. Rule for supplying a missing second noun while casting: now the second noun is the location.<a name="note2ref"></a><span class="notecue"><a href="#note2">[2]</a></span></p><p class="indent0">Understand &quot;<span class="quote">cast [</span><span class="substitution">spell</span><span class="quote">]</span>&quot; or &quot;<span class="quote">[</span><span class="substitution">spell</span><span class="quote">]</span>&quot; as casting it at.</p><p class="indent0">Understand &quot;<span class="quote">cast [</span><span class="substitution">spell</span><span class="quote">] on/at [</span><span class="substitution">something</span><span class="quote">]</span>&quot; or &quot;<span class="quote">[</span><span class="substitution">spell</span><span class="quote">] [</span><span class="substitution">something</span><span class="quote">]</span>&quot; as casting it at.</p><p class="indent0">The current spell focus is an object which varies.<a name="note3ref"></a><span class="notecue"><a href="#note3">[3]</a></span> Before casting, now the current spell focus is the location. </p><p class="indent0">Check casting (this is the can't cast what you don't know rule):<a name="note4ref"></a><span class="notecue"><a href="#note4">[4]</a></span></p><p class="indent1">if the player does not know the spell understood, say &quot;<span class="quote">You do not know the mystery of that enchantment.</span>&quot; instead.</p><p class="indent0">Check casting (this is the can't cast on the wrong sort of target rule):</p><p class="indent1">if the targeting of the spell understood is targeted:</p><p class="indent2">if the second noun is a room, say &quot;<span class="quote">That enchantment must be cast at something.</span>&quot; instead;</p><p class="indent1">otherwise:</p><p class="indent2">unless the second noun is a room, say &quot;<span class="quote">That enchantment cannot be cast at anything.</span>&quot; instead.</p><p class="indent0">Check casting (this is the can't cast without strength rule):</p><p class="indent1">if the strength of the player &lt;= the strength cost of the spell understood to the player, say &quot;<span class="quote">You are weak, and have not sufficient strength of mind.</span>&quot; instead.</p><p class="indent0">Check casting (this is the can't cast at yourself rule):</p><p class="indent1">if the player is the second noun, say &quot;<span class="quote">It is a cardinal rule of magic that no mage may cast an enchantment upon himself.</span>&quot; instead.</p><p class="indent0">Check casting (this is the can't cast without required materials rule):</p><p class="indent1">let the stuff be the requirement of the spell understood;</p><p class="indent1">unless the stuff is air:</p><p class="indent2">if the player is carrying something (called the focus) which is made of the stuff,</p><p class="indent3">now the current spell focus is the focus;</p><p class="indent2">otherwise say &quot;<span class="quote">To weave that enchantment, you must have something made of [</span><span class="substitution">stuff</span><span class="quote">] in your hands.</span>&quot; instead.</p><p class="indent0">Check casting (this is the can't magically attack a warded person rule):</p><p class="indent1">if the nature of the spell understood is offensive and the second noun is a person:</p><p class="indent2">let the intended victim be the second noun;</p><p class="indent2">if the intended victim knows ward magic, say &quot;<span class="quote">With a contemptuous wave of orange sparks, [</span><span class="substitution">the intended victim</span><span class="quote">] cancels your [</span><span class="substitution">spell understood</span><span class="quote">] incantation.</span>&quot; instead.<a name="note5ref"></a><span class="notecue"><a href="#note5">[5]</a></span></p><p class="indent0">Effect is a rulebook.<a name="note6ref"></a><span class="notecue"><a href="#note6">[6]</a></span></p><p class="indent0">The current spell outcome is an indexed text which varies. To record outcome (eventual message - text): now the current spell outcome is eventual message.</p><p class="indent0">The current spell event is a rule which varies. To record event (eventual rule - rule): now the current spell event is eventual rule.</p><p class="indent0">This is the no spell event at all rule: stop.</p><p class="indent0">Carry out casting:</p><p class="indent1">record outcome &quot;<span class="quote">but then nothing obvious happens</span>&quot;;</p><p class="indent1">record event the no spell event at all rule;</p><p class="indent1">now the strength of the player is the strength of the player minus the strength cost of the spell understood to the player;</p><p class="indent1">increase the usage count of the spell understood by 1;</p><p class="indent1">if the usage count of the spell understood is less than 3<a name="note7ref"></a><span class="notecue"><a href="#note7">[7]</a></span>:</p><p class="indent2">increase the score by cost of the spell understood;</p><p class="indent2">increase the score by cost of the spell understood;</p><p class="indent1">if the cost of the spell understood is at least 5 and the current spell focus is something, remove the current spell focus from play;</p><p class="indent1">follow the effect rulebook.</p><p class="indent0">Report casting:</p><p class="indent1">say &quot;<span class="quote">As you intone the words of the [</span><span class="substitution">spell understood</span><span class="quote">] spell, </span>&quot;;</p><p class="indent1">if the current spell focus is something:</p><p class="indent2">say &quot;<span class="quote">[</span><span class="substitution">the current spell focus</span><span class="quote">] </span>&quot;;</p><p class="indent2">unless the player is holding the current spell focus, say &quot;<span class="quote">vanishes as it </span>&quot;;</p><p class="indent2">say &quot;<span class="quote">releases </span>&quot;;</p><p class="indent1">otherwise:</p><p class="indent2">say &quot;<span class="quote">your fingers release </span>&quot;;</p><p class="indent1">say emission of the spell understood;</p><p class="indent1">unless the second noun is a room, say &quot;<span class="quote"> at [</span><span class="substitution">the second noun</span><span class="quote">]</span>&quot;;</p><p class="indent1">say &quot;<span class="quote">, [</span><span class="substitution">current spell outcome</span><span class="quote">]</span>&quot;;</p><p class="indent1">if the player is affected by the spell understood:</p><p class="indent2">if duration of the spell understood is greater than 0:</p><p class="indent3">say &quot;<span class="quote">, which will last for [</span><span class="substitution">duration of the spell understood in words</span><span class="quote">] turn[</span><span class="substitution">s</span><span class="quote">]</span>&quot;;</p><p class="indent3">now the duration timer of the spell understood is the duration of the spell understood;</p><p class="indent3">increase the duration timer of the spell understood by 1;</p><p class="indent1">say &quot;<span class="quote">.</span>&quot;;</p><p class="indent1">follow the current spell event.</p><p class="indent0">Every turn:</p><p class="indent1">repeat through the Table of Enchantments:</p><p class="indent2">let the remaining effect be the duration timer entry;</p><p class="indent2">decrease the remaining effect by 1;</p><p class="indent2">if the remaining effect &gt;= 0, now the duration timer entry is the remaining effect;</p><p class="indent2">if the remaining effect is 0:</p><p class="indent3">now the player is not affected by the spell entry;</p><p class="indent3">say &quot;<span class="quote">(The [</span><span class="substitution">spell entry</span><span class="quote">] spell wears off.)</span>&quot;.<a name="note8ref"></a><span class="notecue"><a href="#note8">[8]</a></span></p><p class="indent0">Understand &quot;<span class="quote">xyzzy</span>&quot; and &quot;<span class="quote">plugh</span>&quot; as a mistake (&quot;<span class="quote">Nobody believes those old children's stories about a colossal cave with magic words any more. Magic's something you spend years and years learning.</span>&quot;).</p>
</div>

<div class ="notes">
<p><span class="notesheading">Notes</span></p>
<p><a name="note1"></a><span class="notetext"><a href="#note1ref">[1]</a>.  We now have two verbs connecting people and spells: we can write statements like "Radagast knows summon elemental", or "Henry is affected by ironbones".</span></p>
<p><a name="note2"></a><span class="notetext"><a href="#note2ref">[2]</a>.  "Casting it at" is an unusual action because it can take two forms, having a sort of transitive and intransitive version: one casts "detect trap" with no target, but "magic missile" must be aimed at something. Inform permits actions to have syntax which leaves a noun optional, but requires that we supply any missing nouns so that by the time the action is processed nothing is missing. We construe a missing target for a spell as being the current location: thus, "detect trap" is actually a spell cast on the ambient surroundings, which seems reasonable enough. (Inform's built-in action "listening" does something similar.)</span></p>
<p><a name="note3"></a><span class="notetext"><a href="#note3ref">[3]</a>.  The variable "current spell focus" typifies something which tends to happen in complex sequences of rules: later rules need to refer to something worked out in the course of an earlier rule. That means the sort of "let ..." variable will not do, because it is too temporary - it expires when the earlier rule finishes, so will be gone when the later rule is reached. Here we put the value into a permanent variable. This might be problematic if one casting action could be interrupted by another one, but here that never happens.</span></p>
<p><a name="note4"></a><span class="notetext"><a href="#note4ref">[4]</a>.  We're naming these rules so that the author of a W&W scenario could use procedural rules to suspend or alter them as needed.</span></p>
<p><a name="note5"></a><span class="notetext"><a href="#note5ref">[5]</a>.  The can't magically attack a warded person rule is a little sloppy: it does not sap the magical strength of the victim to cast the spell, which - if sauce for the wizard is sauce for the necromancer - it perhaps should.</span></p>
<p><a name="note6"></a><span class="notetext"><a href="#note6ref">[6]</a>. The carry out and report rules for the casting action are going to be surprisingly short - considering the vast range of possible outcomes when a spell is cast - and they do this by using a more powerful mechanism to allow for more flexible reporting than would ordinarily be possible: they create a new rulebook, "Effect", whose task is to carry out the spell. Effect rules are also expected to set "current spell outcome" to a suitable message about what happens, and (optionally) "current spell event" to a rule which carries out further consequences.</span></p>
<p><a name="note7"></a><span class="notetext"><a href="#note7ref">[7]</a>.  You gain experience points the first couple of times you cast a spell, but then the novelty wears off.</span></p>
<p><a name="note8"></a><span class="notetext"><a href="#note8ref">[8]</a>.  For simplicity, and to keep storage requirements from going through the roof, time-limited spells can only be applied to the player.</span></p>

</div>

</div>

</body>

</html>
